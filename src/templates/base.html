{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>August</title>
    <link rel="stylesheet" href="{% static 'pkgs/semantic/semantic.min.css' %}" />
    <link rel="stylesheet" href="{% static 'pkgs/mdeditor/css/editormd.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/utils.css' %}" />
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    {% block styles %}{% endblock styles %}
</head>
<body>
    {% include 'partials/base/_navbar.html' %}

    <div class="ui main fluid container">

        <div class="ui text container">
            {% include 'partials/_messages.html' %}
        </div>

        {% block content %}
        {% endblock content %}
    </div>
    {% include 'partials/base/_footer.html' %}
    <script src="{% static 'pkgs/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'pkgs/mdeditor/js/editormd.min.js' %}"></script>
    <script src="{% static 'pkgs/mdeditor/js/editormd.min.js' %}"></script>
    <script src="{% static 'pkgs/mdeditor/languages/en.js' %}"></script>
    <script src="{% static 'js/ajaxCRUD.js' %}"></script>
    <script type="text/javascript">

        $(function () {
            editormd("id_content-wmd-wrapper", {
                watch: false, // 关闭实时预览
                lineNumbers: false,
                lineWrapping: false,
                width: "100% ",
                height: 500,
                placeholder: '',
                // 当有多个mdeditor时，全屏后，其他mdeditor仍然显示，解决此问题。
                onfullscreen : function() {
                    this.editor.css("border-radius", 0).css("z-index", 9999);
                },
                onfullscreenExit : function() {
                    this.editor.css({
                        zIndex : 10,
                        border : "1px solid rgb(221,221,221)"
                    })
                },
                syncScrolling: "single",
                path: "/static/mdeditor/js/lib/",
                // theme
                theme : "default",
                previewTheme : "default",
                editorTheme : "default",

                saveHTMLToTextarea: true, // editor.md 有问题没有测试成功
                toolbarAutoFixed: true,
                searchReplace: true,
                emoji: true,
                tex: false,
                taskList: false,
                flowChart: false,
                sequenceDiagram: false,

                // image upload
                imageUpload: true,
                imageFormats: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'webp'],
                imageUploadURL: "/mdeditor/uploads/",
                toolbarIcons: function () {
                    return ['undo', 'redo', '|', 'bold', 'del', 'italic', 'quote', 'ucwords', 'uppercase', 'lowercase', '|', 'h1', 'h2', 'h3', '|', 'list-ul', 'list-ol', 'hr', '|', 'link', 'reference-link', 'image', 'datetime', '|', 'emoji', 'html-entities', '|', '||', 'watch', 'preview', 'fullscreen']
                },
                onload: function () {
                    console.log('onload', this);
                    //this.fullscreen();
                    //this.unwatch();
                    //this.watch().fullscreen();

                    //this.setMarkdown("#PHP");
                    //this.width("100%");
                    //this.height(480);
                    //this.resize("100%", 640);
                }
            });

        });
    </script>
    {% block javascript %}{% endblock javascript %}
</body>
</html>